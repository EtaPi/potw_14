# Rakefile

require 'rake'

task default: ["build", "run"]

task :build do
  puts "Building..."
  source = Rake::FileList["**/*.c"].exclude("util.c")

  `clang util.c -Wall -Wextra -Wpedantic -c`

  source.each do |s|
    root = File.basename(s, ".*")
    `clang #{s} util.o -Wall -Wextra -Wpedantic -o #{root}`
  end
end

task :run do
  exec( "./c2" )
end
